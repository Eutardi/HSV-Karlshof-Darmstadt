<!DOCTYPE HTML>
<html>
  <head>
    <title>HSV_Darmstadt ‚Äì Events</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>

    <!-- Tailwind CSS -->
    <script>
      window.tailwind = { config: {
        corePlugins: { preflight: false },
        theme: { extend: { screens: { xs: '380px' } } }
      }};
    </script>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React + ReactDOM (UMD) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="is-preload">
    <div id="wrapper">
      <header id="header" class="px-3">
        <a href="index.html" class="logo">Archive</a>
      </header>

      <nav id="nav" class="px-3">
        <ul class="links flex flex-wrap gap-2">
          <li><a href="index.html">Archive</a></li>
          <li class="active"><a href="events.html" aria-current="page">Events</a></li>
        </ul>
      </nav>

      <div id="main">
        <section class="post">
          <header class="major">
            <h1>Events</h1>
            <p>View all upcoming events in an easy calendar format.</p>
          </header>
          <div id="events-root"></div>
        </section>
      </div>

      <footer id="footer" class="px-3">
        <section class="split contact">
          <section class="alt">
            <h3>Address</h3>
            <p>1234 Somewhere Road #87257<br />Nashville, TN 00000-0000</p>
          </section>
        </section>
      </footer>
    </div>

    <script type="text/babel">
      const { useState, useMemo } = React;

      const events = [
        { id: "e1", title: "Yoga Class", date: "2025-08-28", start: "18:00", end: "19:00", location: "Studio A", description: "All levels welcome. Bring your mat!" },
        { id: "e5", title: "Open Gym", date: "2025-08-29", start: "09:00", end: "12:00", location: "Gym Floor", description: "Drop in and use our equipment." },
        { id: "e2", title: "Cooking Workshop", date: "2025-08-30", start: "17:00", end: "19:30", location: "Kitchen Lab", description: "Hands-on pasta making." },
      ];

      const WEEKDAYS = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

      function toDate(d) {
        const [y, m, day] = d.split("-").map(Number);
        return new Date(y, m - 1, day);
      }
      function yyyymmdd(d) {
        const y = d.getFullYear();
        const m = String(d.getMonth() + 1).padStart(2, "0");
        const day = String(d.getDate()).padStart(2, "0");
        return `${y}-${m}-${day}`;
      }
      function formatDateLong(isoDate) {
        const d = toDate(isoDate);
        return d.toLocaleDateString(undefined, { weekday: "long", month: "short", day: "numeric" });
      }

      function useEventsByDate() {
        return useMemo(() => {
          const map = {};
          for (const e of events) {
            if (!map[e.date]) map[e.date] = [];
            map[e.date].push(e);
          }
          return map;
        }, []);
      }

      function EventModal({ e, onClose }) {
        if (!e) return null;
        return (
          <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div className="bg-white rounded-lg p-6 max-w-md w-full">
              <h2 className="text-xl font-bold mb-2">{e.title}</h2>
              <p className="mb-1">{formatDateLong(e.date)} ‚Ä¢ {e.start} - {e.end}</p>
              <p className="mb-1">üìç {e.location}</p>
              <p className="mb-4">{e.description}</p>
              <button onClick={onClose} className="px-4 py-2 bg-black text-white rounded">Close</button>
            </div>
          </div>
        );
      }

      function Calendar({ month, onSelect }) {
        const eventsByDate = useEventsByDate();
        const first = new Date(month.getFullYear(), month.getMonth(), 1);
        const last = new Date(month.getFullYear(), month.getMonth() + 1, 0);
        const startPad = first.getDay();
        const totalDays = last.getDate();

        const days = [];
        for (let i = 0; i < startPad; i++) days.push(null);
        for (let d = 1; d <= totalDays; d++) days.push(new Date(month.getFullYear(), month.getMonth(), d));
        while (days.length % 7 !== 0) days.push(null);

        return (
          <div>
            <div className="grid grid-cols-7 text-center font-medium mb-2">
              {WEEKDAYS.map((w) => <div key={w}>{w}</div>)}
            </div>
            <div className="grid grid-cols-7 gap-3">
              {days.map((d, i) => {
                if (!d) return <div key={i} className="h-40 md:h-48 bg-gray-100 rounded-2xl"></div>;
                const key = yyyymmdd(d);
                const dayEvents = eventsByDate[key] || [];
                const e = dayEvents[0];
                const isClickable = !!e;
                return (
                  <div
                    key={i}
                    role={isClickable ? 'button' : undefined}
                    tabIndex={isClickable ? 0 : -1}
                    className="h-40 md:h-48 bg-white rounded-2xl ring-1 ring-gray-200 p-3 flex flex-col items-stretch justify-start text-left focus:outline-none focus:ring-2 focus:ring-black"
                    onClick={() => isClickable && onSelect(e)}
                    onKeyDown={(ev) => { if (isClickable && (ev.key === 'Enter' || ev.key === ' ')) onSelect(e); }}
                  >
                    <div className="text-sm font-semibold text-gray-700 mb-2">{d.getDate()}</div>
                    {e ? (
                      <div className="flex-1">
                        <div className="w-full rounded-lg px-3 py-3 ring-1 ring-gray-200 bg-gray-50 text-sm md:text-base leading-snug whitespace-normal break-words">
                          <div className="font-semibold">{e.title}</div>
                          <div className="text-gray-600 mt-0.5">{e.start}{e.end ? `‚Äì${e.end}` : ''}{e.location ? ` ‚Ä¢ ${e.location}` : ''}</div>
                        </div>
                      </div>
                    ) : (
                      <div className="flex-1 flex items-center text-gray-300">No events</div>
                    )}
                  </div>
                );
              })}
            </div>
          </div>
        );
      }

      function EventsSection()() {
        const [month, setMonth] = useState(() => { const today = new Date(); today.setDate(1); return today; });
        const [selected, setSelected] = useState(null);

        return (
          <div className="max-w-6xl mx-auto p-4">
            <h2 className="text-3xl font-bold mb-4">Upcoming Events</h2>
            <div className="flex justify-between mb-4">
              <button onClick={() => setMonth(new Date(month.getFullYear(), month.getMonth()-1, 1))} className="px-4 py-2 bg-gray-200 rounded">Prev</button>
              <h3 className="text-xl font-semibold">{month.toLocaleDateString(undefined, { month: 'long', year: 'numeric' })}</h3>
              <button onClick={() => setMonth(new Date(month.getFullYear(), month.getMonth()+1, 1))} className="px-4 py-2 bg-gray-200 rounded">Next</button>
            </div>
            <Calendar month={month} onSelect={setSelected} />
            <EventModal e={selected} onClose={() => setSelected(null)} />
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("events-root"));
      root.render(<EventsSection />);
    </script>
  </body>
</html>

